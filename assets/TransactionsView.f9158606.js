var j=Object.defineProperty;var B=(a,e,s)=>e in a?j(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var x=(a,e,s)=>(B(a,typeof e!="symbol"?e+"":e,s),s);import{d as N,o as m,K as F,w as y,g as l,h as v,e as t,i as P,j as L,L as R,S as w,N as k,O as V,P as W,M as K,u as z,b as E,r as Q,c as f,F as h,f as g,t as d,k as _,Q as $,v as T,l as D}from"./index.936cfd87.js";import{f as q,o as M,_ as G,U as H,N as J,b as X,A as C,c as Y,u as Z,a as tt,r as et}from"./transition.ea34fdad.js";import{u as ot}from"./settings.b2a6602c.js";const st=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),at={class:"fixed inset-0 overflow-y-auto"},nt={class:"flex min-h-full sm:items-center items-end justify-center p-4 text-center"},lt=t("div",{class:"my-2"},[t("p",{class:"text-sm text-gray-500"},"Accounts are of 3 types")],-1),it={class:"flex justify-between"},rt=t("button",{type:"submit",class:"btn btn-primary"},"Submit",-1),ct=N({__name:"Modal",props:{status:{type:Boolean}},setup(a){const e=a;return(s,n)=>(m(),F(l(q),{appear:"",show:e.status,as:"template"},{default:y(()=>[v(l(J),{as:"div",onClose:n[2]||(n[2]=r=>s.$emit("close",!1)),class:"relative z-10"},{default:y(()=>[v(l(M),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:y(()=>[st]),_:1}),t("div",at,[t("div",nt,[v(l(M),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:y(()=>[v(l(G),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:y(()=>[v(l(H),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:y(()=>[P(" Add Account ")]),_:1}),lt,t("form",{class:"flex flex-col gap-5",onSubmit:n[1]||(n[1]=L(r=>s.$emit("submit"),["prevent"]))},[R(s.$slots,"default"),t("div",it,[t("button",{onClick:n[0]||(n[0]=r=>s.$emit("close",!1)),type:"button",class:"btn btn-danger"}," Cancel "),rt])],32)]),_:3})]),_:3})])])]),_:3})]),_:3},8,["show"]))}});var dt=Object.defineProperty,ut=Object.getOwnPropertyDescriptor,p=(a,e,s,n)=>{for(var r=n>1?void 0:n?ut(e,s):e,u=a.length-1,b;u>=0;u--)(b=a[u])&&(r=(n?b(e,s,r):b(r))||r);return n&&r&&dt(e,s,r),r};class c extends K{}x(c,"entity","transactions"),x(c,"primaryKey","id"),x(c,"piniaOptions",{persist:!0});p([X()],c.prototype,"id",2);p([w("")],c.prototype,"fromAccountId",2);p([w("")],c.prototype,"toAccountId",2);p([k(0)],c.prototype,"amount",2);p([w("")],c.prototype,"description",2);p([w("")],c.prototype,"type",2);p([V(()=>C,"fromAccountId","id")],c.prototype,"fromAccount",2);p([V(()=>C,"toAccountId","id")],c.prototype,"toAccount",2);p([W(()=>Date.now()),k(0)],c.prototype,"timestamp",2);const pt=()=>{const a=z(c),e=a.all(),s=E(()=>a.withAll().get());return{transactions:e,transactionRepo:a,transactionsWithAccounts:s,createTransaction:u=>{a.save(u)},deleteTransaction:async u=>await a.destroy(u)}},mt={class:"text-gray-600 body-font"},ft={class:"container px-3 py-12 mx-auto"},yt={class:"flex flex-wrap gap-2"},vt={class:"card-body flex flex-col sm:flex-row justify-between"},_t={class:"text-gray-500 card-title"},bt={class:"text-gray-500 text-xs tracking-widest title-font mb-1"},xt={class:"text-gray-900 title-font text-lg font-medium"},ht=["datetime"],wt=t("div",{class:"card-actions flex sm:flex-col"},[t("button",{class:"btn btn-primary btn-sm"},"+"),t("button",{class:"btn btn-error btn-sm"},"-")],-1),gt={class:"flex"},At={class:"form-control"},St={class:"label cursor-pointer",for:"deposit"},It=t("strong",{class:"label-text text-slate-900 p-2"},"Deposit",-1),$t={class:"form-control"},Tt={class:"label cursor-pointer",for:"withdrawal"},Dt=t("strong",{class:"label-text text-slate-900 p-2"},"Withdrawal",-1),Mt=t("option",{value:""},"From Account",-1),Nt=["value"],kt=t("option",{value:""},"To Account",-1),Vt=["value"],Ct={class:"fixed bottom-10 right-10"},Pt=N({__name:"TransactionsView",setup(a){const e=Q({fromAccountId:"",toAccountId:"",amount:0,description:"",type:"deposit"}),{openModal:s,closeModal:n,isOpen:r}=Y(),{transactionsWithAccounts:u,createTransaction:b}=pt(),{accounts:A}=Z(),{settings:U}=ot();function O(){b({fromAccountId:e.value.fromAccountId,toAccountId:e.value.toAccountId,amount:e.value.amount,description:e.value.description,type:e.value.type}),tt({message:"Transaction Successfull",type:"success"}),n()}return(Ut,i)=>(m(),f(h,null,[t("section",mt,[t("div",ft,[t("div",yt,[(m(!0),f(h,null,g(l(u),o=>{var S,I;return m(),f("div",{key:o.id,class:"card bg-slate-200 shadow-md w-full"},[t("div",vt,[t("span",null,[t("h2",_t,d(o.description),1),t("h3",bt,d(o.type),1),t("h2",xt,d(l(U).currency.symbol)+" "+d(o.amount),1),t("time",{datetime:new Date(o.timestamp).toISOString()},d(new Date(o.timestamp).toLocaleDateString())+" "+d(new Date(o.timestamp).toLocaleTimeString("en-IN")),9,ht)]),t("strong",null,d((S=o.fromAccount)==null?void 0:S.name)+" => "+d((I=o.toAccount)==null?void 0:I.name),1),wt])])}),128))])])]),v(ct,{status:l(r),onClose:l(n),onSubmit:O},{default:y(()=>[t("div",gt,[t("div",At,[t("label",St,[_(t("input",{type:"radio",id:"deposit",name:"type",value:"deposit","onUpdate:modelValue":i[0]||(i[0]=o=>e.value.type=o),class:"radio radio-primary checked:bg-red-500",checked:""},null,512),[[$,e.value.type]]),It])]),t("div",$t,[t("label",Tt,[_(t("input",{type:"radio",id:"withdrawal",name:"type",value:"withdrawal","onUpdate:modelValue":i[1]||(i[1]=o=>e.value.type=o),class:"radio radio-primary checked:bg-red-500",checked:""},null,512),[[$,e.value.type]]),Dt])])]),_(t("input",{min:"0",type:"number","onUpdate:modelValue":i[2]||(i[2]=o=>e.value.amount=o),placeholder:"Amount",class:"input input-bordered"},null,512),[[T,e.value.amount]]),_(t("input",{type:"text","onUpdate:modelValue":i[3]||(i[3]=o=>e.value.description=o),placeholder:"Description",class:"input input-bordered"},null,512),[[T,e.value.description]]),_(t("select",{"onUpdate:modelValue":i[4]||(i[4]=o=>e.value.fromAccountId=o),className:"select select-bordered "},[Mt,(m(!0),f(h,null,g(l(A),o=>(m(),f("option",{key:o.id,value:o.id},d(o.name),9,Nt))),128))],512),[[D,e.value.fromAccountId]]),_(t("select",{"onUpdate:modelValue":i[5]||(i[5]=o=>e.value.toAccountId=o),className:"select select-bordered "},[kt,(m(!0),f(h,null,g(l(A),o=>(m(),f("option",{key:o.id,value:o.id},d(o.name),9,Vt))),128))],512),[[D,e.value.toAccountId]])]),_:1},8,["status","onClose"]),t("div",Ct,[t("button",{onClick:i[6]||(i[6]=(...o)=>l(s)&&l(s)(...o)),class:"btn btn-circle"},[v(l(et))])])],64))}});export{Pt as default};
